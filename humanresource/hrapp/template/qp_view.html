{% extends 'candidate_home.html'%}

{% block body %}

<script type="text/javascript">
  $(document).ready( () => {
    $('.signupbtn').click( (e) => {
      const ques_id = e.currentTarget.id;
      console.log(ques_id);
      options = $('.options');
      $.ajax({
          url: "http://127.0.0.1:8000/hrapp/question_view/",
          type: "POST",
          data: {
            ques_id:ques_id,
            csrfmiddlewaretoken:'{{ csrf_token }}'
          },
          success: res => {
            console.log(res);
            res_keys = Object.keys(res.data);
            console.log(res_keys);
            $('#question').html(res.data['question']);
            $('#option1').html(res.data['option1']);
            $('#option2').html(res.data['option2']);
            $('#option3').html(res.data['option3']);
            $('#option4').html(res.data['option4']);

            $('.signupbtn').attr('id',res.data['id']);
            for (op=0, t=1, v=2; op<options.length; op+=2, t+=2, v++) {
                options[op].value = res.data[res_keys[v]];
                options[t].value  = res.data[res_keys[v]];
                console.log(options[op]);
                console.log(options[t]);
              }
            },

          error: err => {
            console.log(err);
          }
      });
    });
  });
        
</script>

<form >
  {% csrf_token %}
   <div class="container">
    <h1>ONLINE EXAM</h1>
      <hr>
    <div class="form-group">
      <label>Questions :</label>
      <textarea name="question" cols="50" rows="2" class="form-control" id="question">
        {{online.question}}
      </textarea>
    </div>
    <div class="form-group">
      <label>Answer:</label><br>
      <input type="radio" name="answer" id="answer1" value="{{online.option1}}" class="options">
      <label id="option1">{{online.option1}}</label><br>
      <input type="radio" name="answer" id="answer2" value="{{online.option2}}" class="options">
      <label id="option2">{{online.option2}}</label><br>
      <input type="radio" name="answer" id="answer3" value="{{online.option3}}" class="options">
      <label id="option3">{{online.option3}}</label><br>
      <input type="radio" name="answer" id="answer4" value="{{online.option4}}" class="options">
      <label id="option4">{{online.option4}}</label>
    </div>
    <div class="clearfix">
          <button type="button" class="cancelbtn">Cancel</button>
          <button type="button" class="signupbtn" id="{{online.id}}">Submit</button>
       </div>
  </div>
</form>
{% endblock %}